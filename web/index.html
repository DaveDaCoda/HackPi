<html>
<head>
	<title>HackPi</title>
	<script src="/socket.io/socket.io.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
<div id="list-interfaces">
	<h1>
		List Interfaces
	</h1>
	<br>
	<div id="list-interfaces-results">
		
	</div>
	</div>
</body>
<script>
	var socket = io.connect()
	
	function DisplayInterfaces(iface_array){
		for (var i = 0; i < iface_array.length; i++){
			var address = iface_array[i].address
			var isinternal = iface_array[i].internal
			var mac = iface_array[i].mac
			var family = iface_array[i].family
			var netmask = iface_array[i].netmask //is this even needed?
			var scopeid = iface_array[i].scopeid //same here, is this needed?
		}
	}
	function DisplayRAMData(data){
		var freemem = data.freemem / 1073741824
		var usedmem = data.usedmem / 1073741824
		var totalmem = data.totalmem / 1073741824
	}
	function DisplayCPUData(data){
		var cpuspeed = data.currentspeed.avg
		var loadpercent = data.currentload.avgload
		var cputemp = data.cputemp.main
	}
	function DisplaySwapData(data){
		var freeswap = data.swapfree
		var usedswap = data.swapused
		var totalswap = data.swaptotal
	}
	function DisplayFsData(data){
		var readIO = data.ioinfo.rIO / 1024
		var writeIO = data.ioinfo.wIO / 1024
		for (var i = 0; i < data.fsSize.length; i++){
			var disk = data.fsSize[i].fs
			var mountpoint = data.fsSize[i].mount
			var type = data.fsSize[i].type
			var totalspace = data.fsSize[i].size / 1073741824
			var usedpercent = data.fsSize[i].use
			var usedspace = data.fsSize[i].used / 1073741824
		}
	}
	function DisplayUptime(data){
		var uptime = data
	}
	
	socket.on('interfaces result', function(data){
		Object.keys(data).forEach(function(key) {
    var iface = key
		var info = data[key]
		DisplayInterfaces(info)
		});
	})
	
	/*
	setInterval(function(){
		socket.emit('system info')
	}, 1000)
	*/
	socket.on('system info results', function(data){
		DisplayRAMData(data.raminfo)
		DisplayCPUData(data.cpuinfo)
		DisplaySwapData(data.swapinfo)
		DisplayFsData(data.fsinfo)
		DisplayUptime(data.uptime)
	})
</script>
</html>
